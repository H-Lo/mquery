/* mQuery 1.0.x (nightly) (12/29/2021, 9:11:08 PM), vitmalina@gmail.com */
class Query{constructor(e){this.version=.1;let t=[];if(Array.isArray(e))t=e;else if(e instanceof DocumentFragment||e instanceof HTMLElement||e instanceof Text)t=e.isConnected?[e]:[];else if(e instanceof Query)t=e.nodes;else{if("string"!=typeof e)throw new Error("Unknown selector");t=Array.from(document.querySelectorAll(e))}this._refs(t)}_refs(e){this.nodes=e,this.length=e.length,this.each((e,t)=>{this[t]=e});let t=this.nodes.length;for(;this[t];)delete this[t],t++}_insert(r,s){let i=[];if("string"!=typeof s)throw new Error(`Incorrect argument for "${r}(html)". It expects one string argument.`);{let e=this.nodes[0].ownerDocument,t=e.createElement("template");this.each(e=>{t.innerHTML=s,"replaceWith"==r&&i.push(...t.content.childNodes),e[r](t.content)}),"replaceWith"==r&&this._refs(i)}return this}eq(e){let t=[this.nodes[e]];return null==t[0]&&(t=[]),this._refs(t),this}get(e){e=this.nodes[e];return e||this.nodes}find(t){let r=[];return this.each(e=>{e=Array.from(e.querySelectorAll(t));0<e.length&&r.push(...e)}),this._refs(r),this}shadow(e){let t=[];return this.each(e=>{e.shadowRoot&&t.push(e.shadowRoot)}),this._refs(t),e?this.find(e):this}closest(t){let r=[];if(":host"==t){let t=e=>e.parentNode?t(e.parentNode):e;this.each(e=>{r.push(t(e))})}else this.each(e=>{e=e.closest(t);e&&r.push(e)});return this._refs(r),this}parent(){return this.each(e=>{let t=e.parentNode;e&&t.push(e)}),this._refs([]),this}each(r){return this.nodes.forEach((e,t)=>{r(e,t,this)}),this}append(e){return this._insert("append",e)}prepend(e){return this._insert("prepend",e)}after(e){return this._insert("after",e)}before(e){return this._insert("before",e)}replace(e){return this._insert("replaceWith",e)}remove(){return this.each(e=>{e.remove()}),this}empty(){return this.html("")}html(e){return this.prop("innerHTML",e)}text(e){return this.prop("textContent",e)}val(e){return this.attr("value",e)}css(e,t){let r=e;var s=arguments.length;return 0===s||1===s&&"string"==typeof e?this.nodes[0]?"string"==typeof e?this.nodes[0].style[e]:Object.fromEntries(this.nodes[0].style.cssText.split(";").filter(e=>!!e).map(e=>e.split(":").map(e=>e.trim()))):void 0:("object"!=typeof e&&(r={},r[e]=t),this.each((t,e)=>{Object.keys(r).forEach(e=>{t.style[e]=r[e]})}),this)}addClass(e){return this.toggleClass(e,!0),this}removeClass(e){return this.toggleClass(e,!1),this}toggleClass(e,s){return"string"==typeof e&&(e=e.split(" ")),this.each(r=>{e.forEach(t=>{if(""!==t){let e=null!=s?s?"add":"remove":"toggle";r.classList[e](t)}})}),this}hasClass(r){"string"==typeof r&&(r=r.split(" "));let s=!0;return this.each(e=>{let t=Array.from(e.classList);r.forEach(e=>{t.includes(e)||!0!==s||(s=!1)})}),s}on(e,t,r){let[s,i]=String(e).toLowerCase().split(".");return"function"==typeof t&&(r=t,t=void 0),this.each(e=>{e._mQuery=e._mQuery??{},e._mQuery.events=e._mQuery.events??[],e._mQuery.events.push({event:s,scope:i,callback:r,options:t}),e.addEventListener(s,r,t)}),this}off(e,s,i){let[n,h]=String(e).toLowerCase().split(".");return"function"==typeof s&&(i=s,s=void 0),this.each(t=>{if(t._mQuery&&Array.isArray(t._mQuery.events))for(let e=t._mQuery.events.length-1;0<=e;e--){var r=t._mQuery.events[e];null==h||""===h?r.event==n&&r.scope==h&&r.callback==i&&(t.removeEventListener(n,i,s),t._mQuery.events.splice(e,1)):r.event!=n&&""!==n||r.scope!=h&&"*"!==h||(t.removeEventListener(r.event,r.callback,r.options),t._mQuery.events.splice(e,1))}}),this}trigger(e,t){return this}attr(t,r){if(void 0===r&&"string"==typeof t)return this.nodes[0]?this.nodes[0].getAttribute(t):void 0;{let e={};return"object"==typeof t?e=t:e[t]=r,this.each(r=>{Object.entries(e).forEach(([e,t])=>{r.setAttribute(e,t)})}),this}}removeAttr(){return this.each(t=>{Array.from(arguments).forEach(e=>{t.removeAttribute(e)})}),this}prop(t,r){if(void 0===r&&"string"==typeof t)return this.nodes[0]?this.nodes[0][t]:void 0;{let e={};return"object"==typeof t?e=t:e[t]=r,this.each(r=>{Object.entries(e).forEach(([e,t])=>{r[e]=t})}),this}}removeProp(){return this.each(t=>{Array.from(arguments).forEach(e=>{delete t[e]})}),this}data(t,r){if(!(arguments.length<2))return this.each(e=>{e._mQuery=e._mQuery??{},e._mQuery.data=e._mQuery.data??{},null!=r?e._mQuery.data[t]=r:delete e._mQuery.data[t]}),this;if(this.nodes[0]){let s=this.nodes[0]._mQuery?.data??{};return Array.from(this.nodes[0].attributes).forEach(r=>{if("data-"==r.name.substr(0,5)){let t=r.value;var e=r.name.substr(5);if(["[","{"].includes(String(t).substr(0,1)))try{t=JSON.parse(t)}catch(e){t=r.value}void 0===s[e]&&(s[e]=t)}}),t?s[t]:s}}removeData(t){return this.each(e=>{e._mQuery=e._mQuery??{},0!=arguments.lenth&&null!=t&&e._mQuery.data?delete e._mQuery.data[t]:e._mQuery.data={}}),this}show(){return this.css("display","")}hide(){return this.css("display","none")}toggle(){var e=this.css("display");return this.css("display","none"==e?"":"none")}}let query=function(e,t){return new Query(e,t)},$=query;export default $;export{$,query,Query};