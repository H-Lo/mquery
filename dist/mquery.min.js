/* mQuery 1.0.x (nightly) (12/28/2021, 9:51:54 PM), vitmalina@gmail.com */
class Query{constructor(e){if(this.version=.1,Array.isArray(e))this.nodes=e,this.length=e.length;else if(e instanceof DocumentFragment||e instanceof HTMLElement||e instanceof Text)e.isConnected?(this.nodes=[e],this.length=1):(this.nodes=[],this.length=0);else if(e instanceof Query)this.nodes=e.nodes,this.length=e.nodes.length;else{if("string"!=typeof e)throw new Error("Unknown selector");e=document.querySelectorAll(e);this.nodes=Array.from(e),this.length=e.length}this._updateRefs()}_updateRefs(){this.nodes.forEach((e,t)=>{this[t]=e});let e=this.nodes.length;for(;this[e];)delete this[e],e++}_insert(s,r){let n=[];if("string"!=typeof r)throw new Error(`Incorrect argument for "${s}(html)". It expects one string argument.`);{let e=this.nodes[0].ownerDocument,t=e.createElement("template");this.nodes.forEach(e=>{t.innerHTML=r,"replaceWith"==s&&n.push(...t.content.childNodes),e[s](t.content)}),"replaceWith"==s&&(this.nodes=n,this.length=n.length,this._updateRefs())}return this}eq(e){e=this.nodes[e];return e?(this.nodes=[e],this.length=1):(this.nodes=[],this.length=0),this._updateRefs(),this}get(e){e=this.nodes[e];return e||this.nodes}find(t){let s=[];return this.nodes.forEach(e=>{e=e.querySelectorAll(t);0<e.length&&s.push(...e)}),this.nodes=s,this.length=s.length,this._updateRefs(),this}closest(t){let s=[];if(":host"==t){let t=e=>e.parentNode?t(e.parentNode):e;this.nodes.forEach(e=>{s.push(t(e))})}else this.nodes.forEach(e=>{e=e.closest(t);e&&s.push(e)});return this.nodes=s,this.length=s.length,this._updateRefs(),this}parent(){let t=[];return this.nodes.forEach(e=>{e=e.parentNode;e&&t.push(e)}),this.nodes=t,this.length=t.length,this._updateRefs(),this}each(s){return this.nodes.forEach((e,t)=>{s(e,t)}),this}append(e){return this._insert("append",e)}prepend(e){return this._insert("prepend",e)}after(e){return this._insert("after",e)}before(e){return this._insert("before",e)}remove(){return this.each(e=>{e.remove()}),this}empty(){return this.each(t=>{for(let e=t.childNodes.length-1;0<=e;e--){var s=t.childNodes[e];t.removeChild(s)}}),this}replace(e){return this._insert("replaceWith",e)}html(t){return 0==arguments.length?this.nodes[0]?this.nodes[0].innerHTML:void 0:(this.each(e=>{e.innerHTML=t}),this)}text(t){return 0==arguments.length?this.nodes[0]?this.nodes[0].textContent:void 0:(this.each(e=>{e.textContent=t}),this)}val(t){return 0==arguments.length?this.nodes[0]?this.nodes[0].value:void 0:(this.each(e=>{e.setAttribute("value",t)}),this)}css(e,t){let s=e;var r=arguments.length;return 0===r||1===r&&"string"==typeof e?this.nodes[0]?"string"==typeof e?this.nodes[0].style[e]:Object.fromEntries(this.nodes[0].style.cssText.split(";").filter(e=>!!e).map(e=>e.split(":").map(e=>e.trim()))):void 0:("object"!=typeof e&&(s={},s[e]=t),this.each((t,e)=>{Object.keys(s).forEach(e=>{t.style[e]=s[e]})}),this)}addClass(e){return this.toggleClass(e,!0),this}removeClass(e){return this.toggleClass(e,!1),this}toggleClass(e,r){return"string"==typeof e&&(e=e.split(" ")),this.each(s=>{e.forEach(t=>{if(""!==t){let e=null!=r?r?"add":"remove":"toggle";s.classList[e](t)}})}),this}hasClass(s){"string"==typeof s&&(s=s.split(" "));let r=!0;return this.each(e=>{let t=Array.from(e.classList);s.forEach(e=>{t.includes(e)||!0!==r||(r=!1)})}),r}on(e,t,s){let[r,n]=String(e).toLowerCase().split(".");return"function"==typeof t&&(s=t,t=void 0),this.each(e=>{e._mQuery=e._mQuery??{},e._mQuery.events=e._mQuery.events??[],e._mQuery.events.push({event:r,scope:n,callback:s,options:t}),e.addEventListener(r,s,t)}),this}off(e,r,n){let[i,h]=String(e).toLowerCase().split(".");return"function"==typeof r&&(n=r,r=void 0),this.each(t=>{if(t._mQuery&&Array.isArray(t._mQuery.events))for(let e=t._mQuery.events.length-1;0<=e;e--){var s=t._mQuery.events[e];null==h||""===h?s.event==i&&s.scope==h&&s.callback==n&&(t.removeEventListener(i,n,r),t._mQuery.events.splice(e,1)):s.event!=i&&""!==i||s.scope!=h&&"*"!==h||(t.removeEventListener(s.event,s.callback,s.options),t._mQuery.events.splice(e,1))}}),this}attr(t,s){return 1==arguments.length?this.nodes[0]?this.nodes[0].getAttribute():void 0:(this.each(e=>{e.setAttribute(t,s)}),this)}removeAttr(){return this.each(t=>{Array.from(arguments).forEach(e=>{t.removeAttribute(e)})}),this}prop(t,s){return 1==arguments.length?this.nodes[0]?this.nodes[0][t]:void 0:(this.each(e=>{e[t]=s}),this)}removeProp(){return this.each(t=>{Array.from(arguments).forEach(e=>{delete t[e]})}),this}data(t,s){if(!(arguments.length<2))return this.each(e=>{e._mQuery=e._mQuery??{},e._mQuery.data=e._mQuery.data??{},null!=s?e._mQuery.data[t]=s:delete e._mQuery.data[t]}),this;if(this.nodes[0]){let r=this.nodes[0]._mQuery?.data??{};return Array.from(this.nodes[0].attributes).forEach(s=>{if("data-"==s.name.substr(0,5)){let t=s.value;var e=s.name.substr(5);if(["[","{"].includes(String(t).substr(0,1)))try{t=JSON.parse(t)}catch(e){t=s.value}void 0===r[e]&&(r[e]=t)}}),t?r[t]:r}}removeData(t){return this.each(e=>{e._mQuery=e._mQuery??{},0!=arguments.lenth&&null!=t&&e._mQuery.data?delete e._mQuery.data[t]:e._mQuery.data={}}),this}show(){return this.css("display","")}hide(){return this.css("display","none")}toggle(){var e=this.css("display");return this.css("display","none"==e?"":"none")}}let query=function(e,t){return new Query(e,t)},$=query;export default query;export{$,query,Query};