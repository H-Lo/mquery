/* mQuery 0.2 (nightly) (1/1/2022, 10:24:15 AM), vitmalina@gmail.com */
class Query{constructor(e){this.version=.2;let t=[];if(Array.isArray(e))t=e;else if(this._isEl(e))t=e.isConnected?[e]:[];else if(e instanceof Query)t=e.nodes;else{if("string"!=typeof e)throw new Error("Unknown selector");t=Array.from(document.querySelectorAll(e))}this._refs(t)}_isEl(e){return e instanceof DocumentFragment||e instanceof HTMLElement||e instanceof Text}_refs(e){this.nodes=e,this.length=e.length,this.each((e,t)=>{this[t]=e});let t=this.nodes.length;for(;this[t];)delete this[t],t++}_insert(i,n){let h=[],o=this.length;if(!(o<1)){let r=this._isEl(n),s=e=>{let t=this[0].ownerDocument.createElement("template");return t.innerHTML=e,t.content};if("string"==typeof n)this.each(e=>{var t=s(n);"replaceWith"==i&&h.push(...t.childNodes),e[i](t)}),"replaceWith"==i&&this._refs(h);else{if(!r)throw new Error(`Incorrect argument for "${i}(html)". It expects one string argument.`);this.each(e=>{var t=s(n.outerHTML);e[i](1===o?n:t),1<o&&r&&h.push(...t.childNodes)}),1<o&&r&&n.remove()}return this}}eq(e){let t=[this[e]];return null==t[0]&&(t=[]),this._refs(t),this}get(e){e=this[e];return e||this.nodes}find(t){let r=[];return this.each(e=>{e=Array.from(e.querySelectorAll(t));0<e.length&&r.push(...e)}),this._refs(r),this}shadow(e){let t=[];return this.each(e=>{e.shadowRoot&&t.push(e.shadowRoot)}),this._refs(t),e?this.find(e):this}closest(t){let r=[];return this.each(e=>{e=e.closest(t);e&&r.push(e)}),this._refs(r),this}host(r){let s=[],i=e=>e.parentNode?i(e.parentNode):e;return this.each(e=>{let t=e=>{e=i(e);s.push(e.host||e),e.host&&r&&t(e.host)};t(e)}),this._refs(s),this}each(r){return this.nodes.forEach((e,t)=>{r(e,t,this)}),this}append(e){return this._insert("append",e)}prepend(e){return this._insert("prepend",e)}after(e){return this._insert("after",e)}before(e){return this._insert("before",e)}replace(e){return this._insert("replaceWith",e)}remove(){return this.each(e=>{e.remove()}),this}empty(){return this.html("")}html(e){return this.prop("innerHTML",e)}text(e){return this.prop("textContent",e)}val(e){return this.attr("value",e)}css(e,t){let r=e;var s=arguments.length;return 0===s||1===s&&"string"==typeof e?this[0]?"string"==typeof e?this[0].style[e]:Object.fromEntries(this[0].style.cssText.split(";").filter(e=>!!e).map(e=>e.split(":").map(e=>e.trim()))):void 0:("object"!=typeof e&&(r={},r[e]=t),this.each((t,e)=>{Object.keys(r).forEach(e=>{t.style[e]=r[e]})}),this)}addClass(e){return this.toggleClass(e,!0),this}removeClass(e){return this.toggleClass(e,!1),this}toggleClass(t,s){return"string"==typeof t&&(t=t.split(/[ ,]+/)),this.each(r=>{let e=t;null==e&&!1===s&&(e=Array.from(r.classList)),e.forEach(t=>{if(""!==t){let e=null!=s?s?"add":"remove":"toggle";r.classList[e](t)}})}),this}hasClass(r){"string"==typeof r&&(r=r.split(/[ ,]+/));let s=!0;return null==r&&0<this.length?Array.from(this[0].classList):(this.each(e=>{let t=Array.from(e.classList);r.forEach(e=>{t.includes(e)||!0!==s||(s=!1)})}),s)}on(e,t,r){let[s,i]=String(e).toLowerCase().split(".");return"function"==typeof t&&(r=t,t=void 0),this.each(e=>{e._mQuery=e._mQuery??{},e._mQuery.events=e._mQuery.events??[],e._mQuery.events.push({event:s,scope:i,callback:r,options:t}),e.addEventListener(s,r,t)}),this}off(e,s,i){let[n,h]=String(e).toLowerCase().split(".");return"function"==typeof s&&(i=s,s=void 0),this.each(t=>{if(t._mQuery&&Array.isArray(t._mQuery.events))for(let e=t._mQuery.events.length-1;0<=e;e--){var r=t._mQuery.events[e];null==h||""===h?r.event==n&&r.scope==h&&r.callback==i&&(t.removeEventListener(n,i,s),t._mQuery.events.splice(e,1)):r.event!=n&&""!==n||r.scope!=h&&"*"!==h||(t.removeEventListener(r.event,r.callback,r.options),t._mQuery.events.splice(e,1))}}),this}trigger(e,t){let r;return r=new(["click","dblclick","mousedown","mouseup","mousemove"].includes(e)?MouseEvent:["keydown","keyup","keypress"].includes(e)?KeyboardEvent:Event)(e,t),this.each(e=>{e.dispatchEvent(r)}),this}attr(t,r){if(void 0===r&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;{let e={};return"object"==typeof t?e=t:e[t]=r,this.each(r=>{Object.entries(e).forEach(([e,t])=>{r.setAttribute(e,t)})}),this}}removeAttr(){return this.each(t=>{Array.from(arguments).forEach(e=>{t.removeAttribute(e)})}),this}prop(t,r){if(void 0===r&&"string"==typeof t)return this[0]?this[0][t]:void 0;{let e={};return"object"==typeof t?e=t:e[t]=r,this.each(r=>{Object.entries(e).forEach(([e,t])=>{r[e]=t})}),this}}removeProp(){return this.each(t=>{Array.from(arguments).forEach(e=>{delete t[e]})}),this}data(t,r){if(!(arguments.length<2))return this.each(e=>{e._mQuery=e._mQuery??{},e._mQuery.data=e._mQuery.data??{},null!=r?e._mQuery.data[t]=r:delete e._mQuery.data[t]}),this;if(this[0]){let s=this[0]._mQuery?.data??{};return Array.from(this[0].attributes).forEach(r=>{if("data-"==r.name.substr(0,5)){let t=r.value;var e=r.name.substr(5);if(["[","{"].includes(String(t).substr(0,1)))try{t=JSON.parse(t)}catch(e){t=r.value}void 0===s[e]&&(s[e]=t)}}),t?s[t]:s}}removeData(t){return this.each(e=>{e._mQuery=e._mQuery??{},0!=arguments.lenth&&null!=t&&e._mQuery.data?delete e._mQuery.data[t]:e._mQuery.data={}}),this}show(){return this.css("display","inherit")}hide(){return this.css("display","none")}toggle(){var e=this.css("display");return this.css("display","none"==e?"inherit":"none")}change(){return this.trigger("change")}click(){return this.trigger("click")}}let query=function(e,t){return new Query(e,t)},$=query;export default $;export{$,query,Query};